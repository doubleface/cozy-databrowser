{"version":3,"sources":["webpack:///webpack/bootstrap fbddd0e49ad03a1d2fac","webpack:///./src/initialize.js","webpack:///./src/application.js","webpack:///./src/models/menu.js","webpack:///./src/views/main.js","webpack:///./src/views/menu.js","webpack:///./~/datatables.net-buttons-dt/css/buttons.dataTables.css"],"names":["window","app","cozy","Cozy","$","initialize","Router","Backbone","extend","routes","onDoctype","doctype","views","main","setDoctype","menu","select","fetchJSON","then","$el","appendTo","on","refresh","router","history","start","$aside","isExpanded","attr","Collection","model","Model","fetch","Promise","resolve","reject","group","reset","mergeDoubles","result","catch","err","collection","map","reduce","memo","item","label","key","toLowerCase","value","Object","keys","attrToString","_","isObject","i","View","el","events","listenTo","render","onRemoveAllAction","confirm","datatable","DataTable","rows","remove","draw","trigger","console","error","onRemoveAction","e","preventDefault","tr","target","closest","datatable_tr","row","id","data","_id","getCols","json","length","push","title","name","defaultContent","html","toJSON","columns","log","config","destroy","lengthChange","dom","buttons","scrollX","scrollY","deferRender","scroller","dt","column","visible","renderRemoveAll","displayLoader","defineIndex","query","index","selector","itemTemplate","template","bind","empty","forEach","sclass","selected","toUpperCase","substr","url","removeClass","addClass"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fbddd0e49ad03a1d2fac","import app from \"./application\";\nimport \"./styles/app.styl\";\nimport \"../node_modules/font-awesome/css/font-awesome.min.css\";\n\nwindow.app = app;\nwindow.cozy = new Cozy({});\n\n$(() => app.initialize());\n\n\n\n// WEBPACK FOOTER //\n// ./src/initialize.js","import MenuView from \"./views/menu\";\nimport MainView from \"./views/main\";\n\nvar Router = Backbone.Router.extend({\n    routes: {\n        \"doctype/:doctype\": \"onDoctype\"\n    },\n    onDoctype(doctype){\n        this.app.views.main.setDoctype(doctype);\n        this.app.views.menu.select(doctype);\n    }\n});\n\nvar app = {\n    initialize() {\n        window.cozy.fetchJSON(\"PUT\", \"/request/doctypes/getsums/\", {\n            \"reduce\":\"function (keys, values, rereduce) {return sum(values);}\",\n            \"map\":\"function (doc) { if (doc.docType) emit(doc.docType, 1); }\"\n        })\n        .then(() => {\n            this.views = {\n                menu: new MenuView(),\n                main: new MainView()\n            };\n            this.views.menu.$el.appendTo(\"#container\");\n            this.views.main.$el.appendTo(\"#container\");\n\n            this.views.main.on(\"remove:item\", () => {\n                this.views.menu.refresh();\n            });\n            this.router = new Router({\n                app: this\n            });\n            this.router.app = this;\n            Backbone.history.start();\n\n            $(\"[formaction='drawer/toggle']\").on(\"click\", () => {\n                const $aside = $(\"aside\")\n                const isExpanded = $aside.attr(\"aria-expanded\") === \"true\" ? \"false\" : \"true\";\n                $aside.attr(\"aria-expanded\", isExpanded);\n            });\n        });\n    }\n}\n\nvar router = new Router();\n\nexport default app\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/application.js","export default Backbone.Collection.extend({\n    model: Backbone.Model,\n    fetch() {\n        return new Promise((resolve, reject) => {\n            window.cozy.fetchJSON(\"POST\", \"/request/doctypes/getsums/\", {group: true})\n            .then(result => {\n                this.reset(this.mergeDoubles(result));\n                resolve(result);\n            }).catch(err => {\n                reject(err);\n            });\n        });\n    },\n    mergeDoubles(collection) {\n        let map = collection.reduce((memo, item) => {\n            let label = item.key.toLowerCase();\n            if (memo[label]) memo[label]+= item.value;\n            else memo[label] = item.value;\n            return memo;\n        }, {});\n        return Object.keys(map).map(key => {\n            return { key, value: map[key]};\n        });\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/menu.js","function attrToString(attr) {\n    if (!_(attr).isObject()) return attr;\n    else {\n        let result = '<ul>';\n        for (let i in attr) {\n            result+= `<li>${attrToString(attr[i])}</li>`;\n        }\n        result+= '</ul>';\n        return result;\n    }\n}\n\nexport default Backbone.View.extend({\n    el: \"[role='contentinfo']\",\n    events: {\n        \"click .remove_action\": \"onRemoveAction\",\n        \"click .remove-all\": \"onRemoveAllAction\",\n    },\n    collection: new Backbone.Collection(),\n    initialize() {\n        this.listenTo(this.collection, \"reset\", this.render);\n    },\n    onRemoveAllAction() {\n        let result = confirm(\"Are you sure you want to remove ALL the rows?\");\n        if (result) {\n            window.cozy.fetchJSON(\"PUT\", `/request/${this.doctype.toLowerCase()}/all/destroy`)\n            .then(() => {\n                const datatable = this.$(\"#databrowser\").DataTable();\n                datatable.rows().remove().draw();\n                this.trigger(\"remove:item\");\n            })\n            .catch(err => {\n                console.error(err, \"could not destroy the documents\");\n            });\n        }\n    },\n    onRemoveAction(e) {\n        e.preventDefault();\n        let result = confirm(\"Are you sure you want to remove this row?\");\n        if (result) {\n            const datatable = this.$(\"#databrowser\").DataTable();\n            const tr = $(e.target).closest(\"tr\")[0];\n            const datatable_tr = datatable.row(tr);\n            const id = datatable_tr.data()._id;\n            window.cozy.fetchJSON(\"DELETE\", `/data/${id}`)\n            .then(() => {\n                datatable_tr.remove().draw();\n                this.trigger(\"remove:item\");\n            })\n            .catch(err => {\n                console.error(err, \"could not destroy document\");\n            });\n        }\n    },\n    getCols(json) {\n        var result = [];\n        if (json.length === 0 || Object.keys(json[0]) == 0) return false;\n        for (var i in json[0]) {\n            result.push({\n                title: i,\n                name: i.toLowerCase(),\n                data: i,\n                defaultContent: \"\"\n            });\n        }\n        result.push({\n            title: \"Action\",\n            data: null,\n            defaultContent: '<a class=\"remove_action\" title=\"Remove\"><i class=\"fa fa-trash\"></i></a>'\n        });\n        return result;\n    },\n    render() {\n        this.$el.html('<table id=\"databrowser\"></table>');\n        var json = this.collection.toJSON();\n        var columns = this.getCols(json);\n        if (columns === false) {\n            console.log(\"no column or no data at all\");\n            return this;\n        }\n        var config = {\n            destroy: true,\n            lengthChange: false,\n            dom: '<\"thead\"Bfi<\"remove-all-action\">>t',\n            buttons: [\"colvis\", \"copyHtml5\", \"csvHtml5\"],\n            scrollX: \"100%\",\n            scrollY: \"calc(100vh - 7em)\",\n            deferRender: true,\n            scroller: true,\n            data: json,\n            columns: this.getCols(json)\n        };\n        let dt = this.$(\"#databrowser\").DataTable(config);\n        dt.column(\"_id:name\").visible(false);\n        dt.column(\"doctype:name\").visible(false);\n        dt.column(\"password:name\").visible(false);\n        this.renderRemoveAll();\n        return this;\n    },\n    renderRemoveAll() {\n        let title = \"Remove all\";\n        this.$(\".remove-all-action\").html(`<a class=\"dt-button remove-all\">\n                <span><i class=\"fa fa-trash\"></i> ${title}</span>\n        </a>`);\n    },\n    displayLoader() {\n        this.$el.html(`<i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>`);\n    },\n    setDoctype(doctype){\n        this.doctype = doctype;\n        this.displayLoader();\n        cozy.defineIndex(doctype.toLowerCase(), [\"_id\"])\n        .then(index => cozy.query(index, {selector: {\"_id\": {\"$gt\": 0}}}))\n        .then(data => {\n            this.collection.reset(data);\n        })\n        .catch(err => {\n            console.error(err, \"error while fetching doctype\");\n        });\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/main.js","import Collection from \"../models/menu\";\nimport \"../../node_modules/datatables.net-dt/css/jquery.dataTables.css\";\nimport \"../../node_modules/datatables.net-buttons-dt/css/buttons.dataTables.css\";\nimport \"../../node_modules/datatables.net-scroller-dt/css/scroller.dataTables.css\";\n\nexport default Backbone.View.extend({\n    el: \"aside\",\n    collection: new Collection(),\n    initialize() {\n        this.refresh();\n    },\n    itemTemplate: _.template('<li><a class=\"<%= sclass %>\" href=\"#doctype/<%= url %>\"><%= label %> (<%= value %>)</a></li>'),\n    refresh() {\n        this.displayLoader();\n        this.collection.fetch()\n        .then(this.render.bind(this))\n        .catch(err => {\n            console.error(err, \"error while fetching menu collection\");\n            this.$el.empty();\n        });\n    },\n    displayLoader() {\n        this.$el.html(`<i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>`);\n    },\n    render() {\n        var html = \"<ul>\";\n        this.collection.forEach((model) => {\n            var json = model.toJSON();\n            json.sclass = json.key === this.selected ? \"selected\" : \"\";\n            json.label = json.key[0].toUpperCase() + json.key.substr(1);\n            json.url = json.key.toLowerCase();\n            html+= this.itemTemplate(json);\n        }, this);\n        html+= \"</ul>\";\n        this.$el.empty().html(html);\n        return this;\n    },\n    select(doctype) {\n        this.selected = doctype;\n        this.$(\"a\").removeClass(\"selected\");\n        this.$(\"a[href='#doctype/\" + doctype + \"']\").addClass(\"selected\");\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/menu.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/datatables.net-buttons-dt/css/buttons.dataTables.css\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}