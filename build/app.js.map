{"version":3,"sources":["webpack:///webpack/bootstrap 355e4e1931930d073f5f?cef2","webpack:///./src/initialize.js","webpack:///./src/application.js","webpack:///./src/models/menu.js","webpack:///./src/views/main.js","webpack:///./src/views/menu.js","webpack:///./~/datatables.net-buttons-dt/css/buttons.dataTables.css"],"names":["window","app","$","initialize","Router","Backbone","extend","routes","onDoctype","doctype","views","main","setDoctype","menu","select","$el","appendTo","router","history","start","on","$aside","isExpanded","attr","Collection","model","Model","fetch","Promise","resolve","reject","cozysdk","queryView","group","then","reset","result","catch","err","attrToString","_","isObject","i","View","el","collection","listenTo","render","getCols","json","length","Object","keys","push","title","data","defaultContent","html","toJSON","columns","console","log","config","destroy","lengthChange","dom","buttons","scrollX","scrollY","deferRender","scroller","DataTable","toLowerCase","map","record","value","error","bind","itemTemplate","template","forEach","sclass","key","selected","label","toUpperCase","substr","url","empty","removeClass","addClass"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 355e4e1931930d073f5f","import app from \"./application\";\nimport \"../app.styl\";\n\nwindow.app = app;\n\n$(() => app.initialize());\n\n\n\n// WEBPACK FOOTER //\n// ./src/initialize.js","import MenuView from \"./views/menu\";\nimport MainView from \"./views/main\";\n\nvar Router = Backbone.Router.extend({\n    routes: {\n        \"doctype/:doctype\": \"onDoctype\"\n    },\n    onDoctype(doctype){\n        this.app.views.main.setDoctype(doctype);\n        this.app.views.menu.select(doctype);\n    }\n});\n\nvar app = {\n    initialize() {\n        this.views = {\n            menu: new MenuView(),\n            main: new MainView()\n        };\n        this.views.menu.$el.appendTo(\"#container\");\n        this.views.main.$el.appendTo(\"#container\");\n        this.router = new Router({\n            app: this\n        });\n        this.router.app = this;\n        Backbone.history.start();\n\n        $(\"[formaction='drawer/toggle']\").on(\"click\", () => {\n            const $aside = $(\"aside\")\n            const isExpanded = $aside.attr(\"aria-expanded\") === \"true\" ? \"false\" : \"true\";\n            $aside.attr(\"aria-expanded\", isExpanded);\n        });\n    }\n}\n\nvar router = new Router();\n\nexport default app\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/application.js","export default Backbone.Collection.extend({\n    model: Backbone.Model,\n    fetch() {\n        return new Promise((resolve, reject) => {\n            window.cozysdk.queryView(\"doctypes\", \"getsums\", { group: true })\n            .then(result => {\n                this.reset(result);\n                resolve(result);\n            }).catch(err => {\n                reject(err);\n            });\n        });\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/menu.js","function attrToString(attr) {\n    if (!_(attr).isObject()) return attr;\n    else {\n        let result = '<ul>';\n        for (let i in attr) {\n            result+= `<li>${attrToString(attr[i])}</li>`;\n        }\n        result+= '</ul>';\n        return result;\n    }\n}\n\nexport default Backbone.View.extend({\n    el: \"[role='contentinfo']\",\n    collection: new Backbone.Collection(),\n    initialize() {\n        this.listenTo(this.collection, \"reset\", this.render);\n    },\n    getCols(json) {\n        var result = [];\n        if (json.length === 0 || Object.keys(json[0]) == 0) return false;\n        for (var i in json[0]) {\n            result.push({\n                title: i,\n                data: i,\n                defaultContent: \"\"\n            });\n        }\n        return result;\n    },\n    render() {\n        this.$el.html('<table></table>');\n        var json = this.collection.toJSON();\n        var columns = this.getCols(json);\n        if (columns === false) {\n            console.log(\"no column or no data at all\");\n            return this;\n        }\n        var config = {\n            destroy: true,\n            lengthChange: false,\n            dom: '<\"thead\"Bfi>t',\n            buttons: [\"colvis\", \"copyHtml5\", \"csvHtml5\"],\n            scrollX: \"100%\",\n            scrollY: \"calc(100vh - 7em)\",\n            deferRender: true,\n            scroller: true,\n            data: json,\n            columns: this.getCols(json)\n        };\n        this.$(\"table\").DataTable(config);\n        return this;\n    },\n    setDoctype(doctype){\n        this.doctype = doctype;\n        cozysdk.queryView(doctype.toLowerCase(), \"all\", {})\n        .then(data => {\n            this.collection.reset(data.map(record => record.value));\n        })\n        .catch(err => {\n            console.error(err, \"error while fetching doctype\");\n        });\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/main.js","import Collection from \"../models/menu\";\nimport \"../../node_modules/datatables.net-dt/css/jquery.dataTables.css\";\nimport \"../../node_modules/datatables.net-buttons-dt/css/buttons.dataTables.css\";\nimport \"../../node_modules/datatables.net-scroller-dt/css/scroller.dataTables.css\";\n\nexport default Backbone.View.extend({\n    el: \"aside\",\n    collection: new Collection(),\n    initialize() {\n        this.collection.fetch()\n        .then(this.render.bind(this))\n        .catch(err => console.error(err, \"error while fetching menu collection\"));\n    },\n    itemTemplate: _.template('<li><a class=\"<%= sclass %>\" href=\"#doctype/<%= url %>\"><%= label %> (<%= value %>)</a></li>'),\n    render() {\n        var html = \"<ul>\";\n        this.collection.forEach((model) => {\n            var json = model.toJSON();\n            json.sclass = json.key === this.selected ? \"selected\" : \"\";\n            json.label = json.key[0].toUpperCase() + json.key.substr(1);\n            json.url = json.key.toLowerCase();\n            html+= this.itemTemplate(json);\n        }, this);\n        html+= \"</ul>\";\n        this.$el.empty().html(html);\n        return this;\n    },\n    select(doctype) {\n        this.selected = doctype;\n        this.$(\"a\").removeClass(\"selected\");\n        this.$(\"a[href='#doctype/\" + doctype + \"']\").addClass(\"selected\");\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/menu.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/datatables.net-buttons-dt/css/buttons.dataTables.css\n// module id = 13\n// module chunks = 1"],"sourceRoot":""}